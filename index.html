<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Share</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading Food Share</div>
    </div>

    <!-- Onboarding Screens -->
    <div class="onboarding-container" id="onboardingContainer">
        <div class="shape shape-circle shape-1"></div>
        <div class="shape shape-circle shape-2"></div>
        <div class="shape shape-circle shape-3"></div>
        
        <div class="onboarding-slides">
            <div class="onboarding-slide" id="slide1">
                <div class="slide-illustration">
                    <div class="slide-image-container">
                        <svg class="slide-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 10H5C3.89543 10 3 10.8954 3 12V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V12C21 10.8954 20.1046 10 19 10Z" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 15C13.1046 15 14 14.1046 14 13C14 11.8954 13.1046 11 12 11C10.8954 11 10 11.8954 10 13C10 14.1046 10.8954 15 12 15Z" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M17 3L12 7L7 3" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M7 7H17" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="slide-content">
                    <h2 class="slide-title">Share Surplus Food</h2>
                    <p class="slide-description">Connect with your community to share excess food and reduce waste through our simple sharing platform.</p>
                </div>
            </div>
            
            <div class="onboarding-slide" id="slide2">
                <div class="slide-illustration">
                    <div class="slide-image-container">
                        <svg class="slide-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.5 21H6.5C5.11929 21 4 19.8807 4 18.5V5.5C4 4.11929 5.11929 3 6.5 3H17.5C18.8807 3 20 4.11929 20 5.5V18.5C20 19.8807 18.8807 21 17.5 21Z" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 7H15" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 11H15" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 15H13" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="slide-content">
                    <h2 class="slide-title">Find Available Food</h2>
                    <p class="slide-description">Discover fresh food shared by neighbors in your community with real-time updates and easy pick-up options.</p>
                </div>
            </div>
            
            <div class="onboarding-slide" id="slide3">
                <div class="slide-illustration">
                    <div class="slide-image-container">
                        <svg class="slide-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 9H9.01" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15 9H15.01" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="slide-content">
                    <h2 class="slide-title">Make a Difference</h2>
                    <p class="slide-description">Join thousands fighting food waste while building stronger communities and helping those in need around you.</p>
                </div>
            </div>
        </div>
        
        <div class="slide-indicators">
            <div class="slide-indicator active"></div>
            <div class="slide-indicator"></div>
            <div class="slide-indicator"></div>
        </div>
        
        <div class="onboarding-actions">
            <button class="btn skip-btn" id="skipBtn">Skip</button>
            <button class="btn btn-primary" id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Auth Screen -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-logo">
            <i class="fas fa-seedling"></i>
            <h1>Food Share</h1>
        </div>

        <div class="auth-tabs">
            <div class="auth-tab active" id="loginTab" onclick="switchTab('login')">Login</div>
            <div class="auth-tab" id="signupTab" onclick="switchTab('signup')">Sign Up</div>
            <div class="auth-tab-indicator" id="tabIndicator" style="left: 0; width: 50%;"></div>
        </div>

        <div class="auth-form-container">
            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
                <div class="input-group">
                    <label for="loginEmail">Email</label>
                    <div class="input-field">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" placeholder="Enter your email">
                    </div>
                    <div class="error-message" id="loginEmailError">Please enter a valid email</div>
                </div>

                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <div class="input-field">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="Enter your password">
                        <i class="fas fa-eye-slash toggle-password" onclick="togglePasswordVisibility('loginPassword', this)"></i>
                    </div>
                    <div class="error-message" id="loginPasswordError">Password must be at least 6 characters</div>
                </div>

                <button type="button" class="btn btn-primary" onclick="login()" id="loginBtn">
                    <span>Login</span>
                </button>
            </form>

            <!-- Signup Form -->
            <form class="auth-form" id="signupForm" style="display: none;">
                <div class="input-group">
                    <label for="signupName">Full Name</label>
                    <div class="input-field">
                        <i class="fas fa-user"></i>
                        <input type="text" id="signupName" placeholder="Enter your full name">
                    </div>
                    <div class="error-message" id="signupNameError">Please enter your name</div>
                </div>

                <div class="input-group">
                    <label for="signupEmail">Email</label>
                    <div class="input-field">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="signupEmail" placeholder="Enter your email">
                    </div>
                    <div class="error-message" id="signupEmailError">Please enter a valid email</div>
                </div>

                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <div class="input-field">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="signupPassword" placeholder="Enter your password">
                        <i class="fas fa-eye-slash toggle-password" onclick="togglePasswordVisibility('signupPassword', this)"></i>
                    </div>
                    <div class="error-message" id="signupPasswordError">Password must be at least 6 characters</div>
                </div>

                <div class="input-group">
                    <label>Select your role</label>
                    <div class="role-options">
                        <div class="role-option selected" onclick="selectRoleOption(this, 'donor')">
                            <i class="fas fa-hand-holding-heart"></i>
                            <h3>Donor</h3>
                            <p>Share surplus food</p>
                        </div>
                        <div class="role-option" onclick="selectRoleOption(this, 'receiver')">
                            <i class="fas fa-hands-helping"></i>
                            <h3>Receiver</h3>
                            <p>Find available food</p>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Terms and Conditions</label>
                    <div class="terms-container">
                        <div class="terms-content">
                            <h4>Food Share Terms of Service</h4>
                            <p>By creating an account, you agree to our Terms of Service and Privacy Policy. You understand that Food Share is a platform to connect food donors with receivers, and we do not guarantee the quality or safety of any food items shared.</p>
                            <p>Donors must ensure food is safe for consumption and properly stored. Receivers must verify food quality before consumption.</p>
                            <p>You agree to use the platform responsibly and comply with all local laws and regulations regarding food sharing.</p>
                        </div>
                    </div>
                    <div class="terms-checkbox">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">I agree to the Terms of Service and Privacy Policy</label>
                    </div>
                    <div class="error-message" id="termsError">You must agree to the terms</div>
                </div>

                <button type="button" class="btn btn-primary" onclick="signup()" id="signupBtn">
                    <span>Create Account</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Profile Setup Screen -->
    <div class="profile-setup" id="profileSetup">
        <div class="profile-setup-header">
            <h1 class="profile-setup-title">Welcome to Food Share!</h1>
            <p class="profile-setup-subtitle">Let's set up your profile</p>
        </div>

        <form class="profile-form" id="profileForm">
            <div class="avatar-choice">
                <button type="button" class="avatar-choice-btn active" id="defaultAvatarBtn">Default Avatar</button>
                <button type="button" class="avatar-choice-btn" id="customAvatarBtn">Upload Photo</button>
            </div>

            <div class="avatar-options" id="defaultAvatarOptions">
                <div class="avatar-option color-1 selected" onclick="selectDefaultAvatar(this, 'A')">
                    <span>A</span>
                </div>
                <div class="avatar-option color-2" onclick="selectDefaultAvatar(this, 'B')">
                    <span>B</span>
                </div>
                <div class="avatar-option color-3" onclick="selectDefaultAvatar(this, 'C')">
                    <span>C</span>
                </div>
                <div class="avatar-option color-4" onclick="selectDefaultAvatar(this, 'D')">
                    <span>D</span>
                </div>
                <div class="avatar-option color-5" onclick="selectDefaultAvatar(this, 'E')">
                    <span>E</span>
                </div>
                <div class="avatar-option color-6" onclick="selectDefaultAvatar(this, 'F')">
                    <span>F</span>
                </div>
            </div>

            <div class="custom-avatar-upload" id="customAvatarUpload">
                <div class="avatar-preview" id="avatarPreview">
                    <i class="fas fa-user"></i>
                </div>
                <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                <label for="avatarUpload" class="upload-btn">Choose Photo</label>
            </div>

            <div class="input-group">
                <label for="profileBio">Bio (Optional)</label>
                <div class="input-field" style="align-items: flex-start; padding-top: 1rem;">
                    <i class="fas fa-align-left" style="margin-top: 1rem;"></i>
                    <textarea id="profileBio" placeholder="Tell us about yourself" style="width: 100%; border: none; resize: none; min-height: 100px; padding: 1rem 0; font-size: 1rem; font-family: var(--font-main);"></textarea>
                </div>
            </div>

            <div class="input-group">
                <label for="profileLocation">Location</label>
                <div class="input-field">
                    <i class="fas fa-map-marker-alt"></i>
                    <input type="text" id="profileLocation" placeholder="Enter your location">
                </div>
            </div>

            <div class="input-group">
                <label for="profileOrganization">Organization (Optional)</label>
                <div class="input-field">
                    <i class="fas fa-building"></i>
                    <input type="text" id="profileOrganization" placeholder="Enter organization name">
                </div>
            </div>

            <button type="button" class="btn btn-primary" id="completeProfileBtn" style="margin-top: 1rem;">
                <span>Complete Profile</span>
            </button>
        </form>
    </div>

    <!-- Verification Modal -->
    <div class="verification-modal" id="verificationModal">
        <div class="verification-header">
            <h1 class="verification-title">Verify Your Account</h1>
            <p class="verification-subtitle">Submit required documents for verification</p>
        </div>

        <div class="verification-steps">
            <div class="verification-step">
                <div class="step-content">
                    <h3 class="step-title">Government ID</h3>
                    <p class="step-description">Upload a clear photo of your ID, driver's license, or passport</p>
                    <div class="image-upload" style="margin-top: 1rem;">
                        <div class="image-preview" id="idImagePreview">
                            <i class="fas fa-id-card"></i>
                        </div>
                        <input type="file" id="idImageUpload" accept="image/*" style="display: none;">
                        <label for="idImageUpload" class="upload-btn">Upload ID Photo</label>
                    </div>
                </div>
            </div>

            <div class="verification-step">
                <div class="step-content">
                    <h3 class="step-title">Utility Bill</h3>
                    <p class="step-description">Upload a recent utility bill showing your name and address</p>
                    <div class="image-upload" style="margin-top: 1rem;">
                        <div class="image-preview" id="addressImagePreview">
                            <i class="fas fa-file-invoice"></i>
                        </div>
                        <input type="file" id="addressImageUpload" accept="image/*" style="display: none;">
                        <label for="addressImageUpload" class="upload-btn">Upload Utility Bill</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="verification-actions">
            <button class="btn btn-secondary" onclick="hideVerificationModal()">Cancel</button>
            <button class="btn btn-primary" onclick="submitVerification()" id="submitVerificationBtn">Submit for Review</button>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-avatar" id="sidebarAvatar">
                    <span id="sidebarAvatarInitial">A</span>
                    <img id="sidebarAvatarImage" style="display: none;">
                </div>
                <div class="sidebar-user-info">
                    <h3 id="sidebarUserName">User Name</h3>
                    <p id="sidebarUserStatus">
                        <i class="fas fa-check-circle verified" id="verifiedIcon" style="display: none;"></i>
                        <i class="fas fa-exclamation-circle unverified" id="unverifiedIcon"></i>
                        <span id="statusText">Unverified</span>
                    </p>
                </div>
            </div>

            <div class="sidebar-nav">
                <a href="#" class="sidebar-item active" onclick="showPage('home')">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#" class="sidebar-item" onclick="showPage('listings')" id="listingsNavItem">
                    <i class="fas fa-utensils"></i>
                    <span>My Listings</span>
                </a>
                <a href="#" class="sidebar-item" onclick="showPage('messages')">
                    <i class="fas fa-comments"></i>
                    <span>Messages</span>
                    <span class="badge" id="messageBadge" style="display: none;">3</span>
                </a>
                <a href="#" class="sidebar-item" onclick="showPage('notifications')">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                    <span class="badge" id="notificationBadge" style="display: none;">5</span>
                </a>
            </div>

            <div class="sidebar-footer">
                <a href="#" class="sidebar-item" onclick="showPage('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="#" class="sidebar-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>

        <!-- Mobile Header -->
        <div class="mobile-header">
            <h1 class="mobile-header-title" id="mobileHeaderTitle">Home</h1>
            <div class="mobile-header-actions">
                <div class="notification-badge" onclick="toggleNotificationsModal()">
                      <i class="fas fa-bell"></i>
                      <span class="badge" id="mobileNotificationBadge" style="display: none;">0</span>
                  </div>
                <div class="mobile-header-avatar" id="mobileHeaderAvatar" onclick="showPage('profile')">
                    <span id="mobileAvatarInitial">A</span>
                    <img id="mobileAvatarImage" style="display: none;">
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Home Page Content -->
            <div class="page-content" id="homePage">
                <div class="welcome-message">
                    <h1 class="greeting" id="greeting">Good Morning</h1>
                    <p class="user-name" id="welcomeUserName">Welcome back, User!</p>
                </div>

                <div id="verificationBanner" class="verification-banner" style="display: none;">
                    <div class="verification-content">
                        <div class="verification-icon">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="verification-text">
                            <h3>Verify Your Account</h3>
                            <p>Complete verification to access all features</p>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showVerificationModal()" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        Verify Now
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <p class="stat-title">Total Donations</p>
                        <h2 class="stat-value" id="totalDonations">0</h2>
                        <p class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="stat1Change">0% from last month</span>
                        </p>
                    </div>
                    <div class="stat-card">
                        <p class="stat-title">Active Listings</p>
                        <h2 class="stat-value" id="activeListings">0</h2>
                        <p class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="stat2Change">0% from last month</span>
                        </p>
                    </div>
                    <div class="stat-card">
                        <p class="stat-title">Your Rating</p>
                        <h2 class="stat-value" id="userRating">0.0</h2>
                        <p class="stat-change" id="ratingChange">
                            <i class="fas fa-arrow-up"></i>
                            <span>0.0 from last month</span>
                        </p>
                    </div>
                    <div class="stat-card">
                        <p class="stat-title">People Helped</p>
                        <h2 class="stat-value" id="peopleHelped">0</h2>
                        <p class="stat-change" id="stat4Change">
                            <i class="fas fa-arrow-up"></i>
                            <span>0 from last month</span>
                        </p>
                    </div>
                </div>

                <div class="quick-actions">
                    <a href="#" class="action-card" onclick="showPage('listings')">
                        <i class="fas fa-utensils"></i>
                        <h3>Browse Listings</h3>
                    </a>
                    <a href="#" class="action-card" onclick="showPage('messages')">
                        <i class="fas fa-comments"></i>
                        <h3>Messages</h3>
                    </a>
                    <a href="#" class="action-card" onclick="showPage('notifications')">
                        <i class="fas fa-bell"></i>
                        <h3>Notifications</h3>
                    </a>
                    <a href="#" class="action-card" onclick="showPage('profile')">
                        <i class="fas fa-user"></i>
                        <h3>Profile</h3>
                    </a>
                </div>

            </div>

<!-- Listings Page Content -->
<div class="page-content" id="listingsPage" style="display: none;">
    <!-- This header will only show for receivers -->
    <div class="listings-header" id="listingsHeader" style="display: none;">
        <div class="search-container">
            <div class="input-field">
                <i class="fas fa-search"></i>
                <input type="text" id="listingSearch" placeholder="Search listings...">
            </div>
        </div>
        
        <div class="category-filters">
            <div class="category-filter active" data-category="all" onclick="filterListings()">
                <i class="fas fa-utensils"></i>
                <span>All</span>
            </div>
            <div class="category-filter" data-category="bakery" onclick="filterListings()">
                <i class="fas fa-bread-slice"></i>
                <span>Bakery</span>
            </div>
            <div class="category-filter" data-category="produce" onclick="filterListings()">
                <i class="fas fa-apple-alt"></i>
                <span>Produce</span>
            </div>
            <div class="category-filter" data-category="dairy" onclick="filterListings()">
                <i class="fas fa-cheese"></i>
                <span>Dairy</span>
            </div>
            <div class="category-filter" data-category="pantry" onclick="filterListings()">
                <i class="fas fa-box-open"></i>
                <span>Pantry</span>
            </div>
            <div class="category-filter" data-category="prepared" onclick="filterListings()">
                <i class="fas fa-utensils"></i>
                <span>Prepared</span>
            </div>
        </div>
    </div>

    <div id="listingsContent">
        <div class="page-loading">
            <div class="page-loading-spinner"></div>
            <div class="page-loading-text">Loading listings...</div>
        </div>
    </div>
</div>

            <!-- Messages Page Content -->
<div class="page-content" id="messagesPage" style="display: none;">
    <div id="messagesContent">
        <div class="messages-list">
            <!-- Messages will be rendered here dynamically -->
        </div>
    </div>
</div>
            
<!-- Chat Page Content -->
<div class="page-content" id="chatPage" style="display: none;">
    <div class="chat-header">
        <div class="chat-header-back" onclick="backToMessages()">
            <i class="fas fa-arrow-left"></i>
        </div>
        <div class="chat-header-info">
            <div class="chat-header-avatar" id="chatHeaderAvatar">
                <span id="chatAvatarInitial">U</span>
                <img id="chatAvatarImage" style="display: none;">
            </div>
            <h3 id="chatHeaderName">User</h3>
        </div>
    </div>
    
    <div class="chat-messages" id="chatMessages">
        <div class="empty-state">
            <i class="fas fa-comments"></i>
            <h3>No messages yet</h3>
            <p>Send a message to start the conversation!</p>
        </div>
    </div>
    
    <div class="chat-input-container">
        <input type="text" id="chatMessageInput" placeholder="Type your message..." class="chat-input">
        <button id="sendMessageBtn" class="chat-send-btn" onclick="sendMessage()">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>

            <!-- Profile Page Content -->
            <div class="page-content" id="profilePage" style="display: none;">
                <div class="profile-header" style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="avatar-large" style="width: 80px; height: 80px; border-radius: 50%; background-color: var(--gray-100); display: flex; align-items: center; justify-content: center; overflow: hidden; font-size: 2rem; font-weight: 600; color: white;" id="profileAvatar">
                        <span id="profileAvatarInitial">A</span>
                        <img id="profileAvatarImage" style="display: none; width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div>
                        <h2 style="font-size: 1.5rem; color: var(--gray-600); margin-bottom: 0.3rem;" id="profileUserName">User Name</h2>
                        <p style="display: flex; align-items: center; gap: 0.3rem; color: var(--gray-400); font-size: 0.9rem;">
                            <i class="fas fa-user-tag"></i>
                            <span id="profileUserRole">Donor</span>
                        </p>
                        <p style="display: flex; align-items: center; gap: 0.3rem; color: var(--gray-400); font-size: 0.9rem; margin-top: 0.3rem;" id="profileVerificationStatus">
                            <i class="fas fa-exclamation-circle" style="color: #f59e0b;"></i>
                            <span>Unverified</span>
                        </p>
                    </div>
                </div>

                <div class="verification-banner" id="profileVerificationBanner" style="display: none;">
                    <div class="verification-content">
                        <div class="verification-icon">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="verification-text">
                            <h3>Account Verification Required</h3>
                            <p>Verify your account to create listings and request food</p>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showVerificationModal()" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        Start Verification
                    </button>
                </div>

                <div class="profile-details" style="margin-bottom: 2rem;">
                    <div style="margin-bottom: 1rem;">
                        <h3 style="font-size: 1rem; color: var(--gray-500); margin-bottom: 0.3rem;">Bio</h3>
                        <p style="color: var(--gray-600); font-size: 0.9rem; line-height: 1.5;" id="profileBioText">No bio provided</p>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <h3 style="font-size: 1rem; color: var(--gray-500); margin-bottom: 0.3rem;">Location</h3>
                        <p style="color: var(--gray-600); font-size: 0.9rem;" id="profileLocationText">No location provided</p>
                    </div>
                    <div id="profileOrganizationContainer" style="margin-bottom: 1rem; display: none;">
                        <h3 style="font-size: 1rem; color: var(--gray-500); margin-bottom: 0.3rem;">Organization</h3>
                        <p style="color: var(--gray-600); font-size: 0.9rem;" id="profileOrganizationText"></p>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 2rem;">
                    <h2>Account Settings</h2>
                </div>

                <div class="settings-list" style="background-color: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-sm); margin-bottom: 2rem;">
                    <a href="#" class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600); border-bottom: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-user" style="color: var(--gray-400);"></i>
                            <span>Personal Information</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                    <a href="#" class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600); border-bottom: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-bell" style="color: var(--gray-400);"></i>
                            <span>Notifications</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                    <a href="#" class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600); border-bottom: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-lock" style="color: var(--gray-400);"></i>
                            <span>Change Password</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                </div>

                <div class="section-title">
                    <h2>About</h2>
                </div>

                <div class="settings-list" style="background-color: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-sm); margin-bottom: 2rem;">
                    <a href="#" class="setting-item" onclick="showPage('termsPage')" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600); border-bottom: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-file-alt" style="color: var(--gray-400);"></i>
                            <span>Terms of Service</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                    <a href="#" class="setting-item" onclick="showPage('privacyPage')" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600); border-bottom: 1px solid var(--gray-200);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-shield-alt" style="color: var(--gray-400);"></i>
                            <span>Privacy Policy</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                    <a href="#" class="setting-item" onclick="showPage('contactPage')" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; text-decoration: none; color: var(--gray-600);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-envelope" style="color: var(--gray-400);"></i>
                            <span>Contact Us</span>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--gray-400);"></i>
                    </a>
                </div>


                <button class="btn btn-primary" onclick="logout()" style="width: 100%; background-color: white; color: var(--gray-600); border: 1px solid var(--gray-200); margin-bottom: 1rem;">
                    <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>
                    <span>Logout</span>
                </button>

                <button class="btn btn-secondary" onclick="showDeleteAccountModal()" style="width: 100%; background-color: white; color: #ef4444; border: 1px solid var(--gray-200);">
                    <i class="fas fa-trash-alt" style="margin-right: 8px;"></i>
                    <span>Delete Account</span>
                </button>
            </div>
            
            <!-- Notifications Page Content -->
<div class="page-content" id="notificationsPage" style="display: none;">
    <div class="section-title">
        <h2>Notifications</h2>
        <button class="btn btn-secondary" onclick="markAllAsRead()" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
            Mark All as Read
        </button>
    </div>
    
    <div id="notificationsList">
        <!-- Notifications will be rendered here -->
    </div>
</div>

<!-- Alerts Page -->
<div class="page-content" id="alertsPage" style="display: none;">
    <div class="section-title">
        <h2>Recent Requests</h2>
    </div>
    <div id="alertsContent"></div>
</div>

<!-- Notifications Modal -->
<div class="modal-overlay" id="notificationsModal">
    <div class="modal" style="max-width: 500px;">
        <div class="modal-header">
            <h2 class="modal-title">Notifications</h2>
            <button class="modal-close" onclick="hideModal('notificationsModal')">&times;</button>
        </div>
        <div class="modal-body">
            <div id="notificationsModalContent">
                <div class="page-loading">
                    <div class="page-loading-spinner"></div>
                    <div class="page-loading-text">Loading notifications...</div>
                </div>
            </div>
        </div>
    </div>
</div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <a href="#" class="nav-item active" onclick="showPage('home')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" onclick="showPage('listings')">
                <i class="fas fa-utensils"></i>
                <span>Listings</span>
            </a>
            <a href="#" class="nav-item" onclick="showPage('messages')">
                <i class="fas fa-comments"></i>
                <span>Messages</span>
                <span class="badge" id="bottomNavMessageBadge" style="display: none;">3</span>
            </a>
            <a href="#" class="nav-item" onclick="showPage('profile')">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
        </div>

        <!-- Floating Action Button for Donors -->
        <div class="fab" id="fabButton" onclick="showCreateListingModal()">
            <i class="fas fa-plus"></i>
        </div>
    </div>

    <!-- Create Listing Modal -->
    <div class="modal-overlay" id="createListingModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Create New Listing</h2>
                <button class="modal-close" onclick="hideModal('createListingModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Food Image</label>
                    <div class="image-upload">
                        <div class="image-preview" id="listingImagePreview">
                            <i class="fas fa-camera"></i>
                        </div>
                        <input type="file" id="listingImageUpload" accept="image/*" style="display: none;">
                        <label for="listingImageUpload" class="upload-label">Upload Photo</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="listingTitle">Food Title</label>
                    <div class="input-field">
                        <i class="fas fa-pen"></i>
                        <input type="text" id="listingTitle" placeholder="e.g., Fresh Baked Bread">
                    </div>
                    <div class="error-message" id="listingTitleError">Please enter a title</div>
                </div>

                <div class="form-group">
                    <label for="listingDescription">Description</label>
                    <div class="input-field" style="align-items: flex-start; padding-top: 1rem;">
                        <i class="fas fa-align-left" style="margin-top: 1rem;"></i>
                        <textarea id="listingDescription" placeholder="Describe the food item (quantity, condition, etc.)" style="width: 100%; border: none; resize: none; min-height: 100px; padding: 1rem 0; font-size: 1rem; font-family: var(--font-main);"></textarea>
                    </div>
                    <div class="error-message" id="listingDescriptionError">Please enter a description</div>
                </div>

                <div class="form-group">
                    <label for="listingExpiry">Expiry Date</label>
                    <div class="input-field">
                        <i class="fas fa-calendar-day"></i>
                        <input type="date" id="listingExpiry">
                    </div>
                    <div class="error-message" id="listingExpiryError">Please select an expiry date</div>
                </div>

                <div class="form-group">
                    <label for="listingAddress">Pickup Address</label>
                    <div class="input-field">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="listingAddress" placeholder="Enter pickup address">
                    </div>
                    <div class="error-message" id="listingAddressError">Please enter an address</div>
                </div>

                <div class="form-group">
                    <label>Category</label>
                    <div class="category-select">
                        <div class="category-option" data-category="bakery" onclick="selectCategory(this, 'bakery')">
                            <i class="fas fa-bread-slice"></i>
                            <h4>Bakery</h4>
                        </div>
                        <div class="category-option" data-category="produce" onclick="selectCategory(this, 'produce')">
                            <i class="fas fa-apple-alt"></i>
                            <h4>Produce</h4>
                        </div>
                        <div class="category-option" data-category="dairy" onclick="selectCategory(this, 'dairy')">
                            <i class="fas fa-cheese"></i>
                            <h4>Dairy</h4>
                        </div>
                        <div class="category-option" data-category="pantry" onclick="selectCategory(this, 'pantry')">
                            <i class="fas fa-box-open"></i>
                            <h4>Pantry</h4>
                        </div>
                        <div class="category-option" data-category="prepared" onclick="selectCategory(this, 'prepared')">
                            <i class="fas fa-utensils"></i>
                            <h4>Prepared</h4>
                        </div>
                        <div class="category-option" data-category="other" onclick="selectCategory(this, 'other')">
                            <i class="fas fa-ellipsis-h"></i>
                            <h4>Other</h4>
                        </div>
                    </div>
                    <input type="hidden" id="food-category">
                    <div class="error-message" id="food-category-error"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('createListingModal')">Cancel</button>
                <button class="btn btn-primary" onclick="createListing()" id="createListingBtn">Create Listing</button>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="delete-account-modal" id="deleteAccountModal">
        <div class="delete-account-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h2 class="delete-account-title">Delete Your Account?</h2>
        <p class="delete-account-text">This action cannot be undone. All your data will be permanently removed from our systems.</p>
        
        <div class="form-group" style="margin-bottom: 2rem;">
            <label for="deletePassword">Enter your password to confirm</label>
            <div class="input-field">
                <i class="fas fa-lock"></i>
                <input type="password" id="deletePassword" placeholder="Your password">
            </div>
            <div class="error-message" id="deletePasswordError">Incorrect password</div>
        </div>

        <div class="delete-account-actions">
            <button class="btn btn-secondary" onclick="hideModal('deleteAccountModal')">Cancel</button>
            <button class="btn btn-primary" style="background-color: #ef4444;" onclick="deleteAccount()">Delete Account</button>
        </div>
    </div>

<div class="page-content" id="termsPage" style="display: none;">
    <div class="section-title">
        <h2>Terms of Service</h2>
    </div>

    <div class="legal-content" style="background-color: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: var(--shadow-sm);">
        <h3 style="margin-bottom: 1rem; color: var(--gray-700);">Last Updated: June 7, 2023</h3>
        
        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">1. Introduction</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                Welcome to Food Share. These Terms of Service ("Terms") govern your use of our platform that connects food donors with receivers to reduce food waste. By accessing or using our service, you agree to be bound by these Terms.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">2. User Responsibilities</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                As a user of Food Share, you agree to:
            </p>
            <ul style="color: var(--gray-600); line-height: 1.6; padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Provide accurate information about food items you list</li>
                <li>Ensure all shared food is safe for consumption</li>
                <li>Comply with all local food safety regulations</li>
                <li>Not use the platform for commercial purposes without authorization</li>
                <li>Treat other users with respect in all communications</li>
            </ul>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">3. Food Safety Disclaimer</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                Food Share acts solely as a platform to connect donors and receivers. We do not verify the quality, safety, or condition of any food items shared through our service. Users assume all risks associated with consuming food obtained through the platform.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">4. Account Termination</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We reserve the right to suspend or terminate accounts that violate these Terms, engage in fraudulent activity, or misuse the platform in any way.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">5. Limitation of Liability</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                Food Share shall not be liable for any direct, indirect, incidental, special, or consequential damages resulting from the use or inability to use our service, or from any food items obtained through the platform.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">6. Changes to Terms</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We may modify these Terms at any time. Continued use of the service after changes constitutes acceptance of the new Terms.
            </p>
        </div>
    </div>

    <button class="btn btn-primary" onclick="showPage('profile')" style="width: 100%;">
        <i class="fas fa-arrow-left" style="margin-right: 8px;"></i>
        <span>Back to Profile</span>
    </button>
</div>

<div class="page-content" id="privacyPage" style="display: none;">
    <div class="section-title">
        <h2>Privacy Policy</h2>
    </div>

    <div class="legal-content" style="background-color: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: var(--shadow-sm);">
        <h3 style="margin-bottom: 1rem; color: var(--gray-700);">Last Updated: June 7, 2023</h3>
        
        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">1. Information We Collect</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                When you use Food Share, we collect:
            </p>
            <ul style="color: var(--gray-600); line-height: 1.6; padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Account information (name, email, role)</li>
                <li>Profile details (bio, location, organization)</li>
                <li>Food listing information (photos, descriptions, locations)</li>
                <li>Messages between users</li>
                <li>Usage data and analytics</li>
            </ul>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">2. How We Use Your Information</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We use the information we collect to:
            </p>
            <ul style="color: var(--gray-600); line-height: 1.6; padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Provide and improve our services</li>
                <li>Connect donors and receivers</li>
                <li>Ensure platform safety and prevent fraud</li>
                <li>Communicate with users about their accounts</li>
                <li>Analyze usage patterns to enhance user experience</li>
            </ul>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">3. Data Sharing</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We may share your information with:
            </p>
            <ul style="color: var(--gray-600); line-height: 1.6; padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Other users as necessary for food sharing transactions</li>
                <li>Service providers who assist in operating our platform</li>
                <li>Legal authorities when required by law</li>
            </ul>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We do not sell your personal information to third parties.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">4. Data Security</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We implement appropriate security measures to protect your information. However, no system is completely secure, and we cannot guarantee absolute security.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">5. Your Rights</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                You may:
            </p>
            <ul style="color: var(--gray-600); line-height: 1.6; padding-left: 1.5rem; margin-bottom: 1rem;">
                <li>Access, update, or delete your account information</li>
                <li>Opt out of non-essential communications</li>
                <li>Request a copy of your personal data</li>
            </ul>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">6. Children's Privacy</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                Our service is not intended for users under 13 years of age. We do not knowingly collect personal information from children under 13.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 0.5rem; color: var(--gray-700);">7. Changes to This Policy</h4>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We may update this Privacy Policy periodically. We will notify users of significant changes through the app or via email.
            </p>
        </div>
    </div>

    <button class="btn btn-primary" onclick="showPage('profile')" style="width: 100%;">
        <i class="fas fa-arrow-left" style="margin-right: 8px;"></i>
        <span>Back to Profile</span>
    </button>
</div>

<div class="page-content" id="contactPage" style="display: none;">
    <div class="section-title">
        <h2>Contact Us</h2>
    </div>

    <div class="contact-content" style="background-color: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: var(--shadow-sm);">
        <div style="margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem; color: var(--gray-700);">Get in Touch</h3>
            <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                We'd love to hear from you! Whether you have questions about using Food Share, need support, or want to provide feedback, please reach out using one of the methods below.
            </p>
        </div>

        <div style="margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <i class="fas fa-envelope" style="color: var(--primary-green); font-size: 1.2rem;"></i>
                <div>
                    <h4 style="margin-bottom: 0.2rem; color: var(--gray-700);">Email</h4>
                    <p style="color: var(--gray-600);">support@foodshareapp.com</p>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <i class="fas fa-phone" style="color: var(--primary-green); font-size: 1.2rem;"></i>
                <div>
                    <h4 style="margin-bottom: 0.2rem; color: var(--gray-700);">Phone</h4>
                    <p style="color: var(--gray-600);">+1 (800) 555-1234</p>
                    <p style="color: var(--gray-400); font-size: 0.9rem;">Monday-Friday, 9am-5pm EST</p>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <i class="fas fa-map-marker-alt" style="color: var(--primary-green); font-size: 1.2rem;"></i>
                <div>
                    <h4 style="margin-bottom: 0.2rem; color: var(--gray-700);">Mailing Address</h4>
                    <p style="color: var(--gray-600);">Food Share Inc.</p>
                    <p style="color: var(--gray-600);">123 Green Street</p>
                    <p style="color: var(--gray-600);">Eco City, EC 12345</p>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem; color: var(--gray-700);">Send Us a Message</h3>
            <div class="form-group">
                <label for="contactName">Your Name</label>
                <div class="input-field">
                    <i class="fas fa-user"></i>
                    <input type="text" id="contactName" placeholder="Enter your name">
                </div>
            </div>

            <div class="form-group">
                <label for="contactEmail">Email Address</label>
                <div class="input-field">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="contactEmail" placeholder="Enter your email">
                </div>
            </div>

            <div class="form-group">
                <label for="contactSubject">Subject</label>
                <div class="input-field">
                    <i class="fas fa-tag"></i>
                    <input type="text" id="contactSubject" placeholder="What's this about?">
                </div>
            </div>

            <div class="form-group">
                <label for="contactMessage">Message</label>
                <div class="input-field" style="align-items: flex-start; padding-top: 1rem;">
                    <i class="fas fa-comment" style="margin-top: 1rem;"></i>
                    <textarea id="contactMessage" placeholder="Type your message here" style="width: 100%; border: none; resize: none; min-height: 150px; padding: 1rem 0; font-size: 1rem; font-family: var(--font-main);"></textarea>
                </div>
            </div>

            <button class="btn btn-primary" onclick="submitContactForm()" style="width: 100%;">
                <span>Send Message</span>
            </button>
        </div>
    </div>

    <button class="btn btn-primary" onclick="showPage('profile')" style="width: 100%;">
        <i class="fas fa-arrow-left" style="margin-right: 8px;"></i>
        <span>Back to Profile</span>
    </button>
</div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer"></div>
    <script src="app.js"></script>
</body>
</html>
